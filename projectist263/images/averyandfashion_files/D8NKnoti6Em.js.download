;/*FB_PKG_DELIM*/

__d("PolarisDynamicExploreV3MediaPageGrid.react",["CometRelay","CometRouteParams","FBLogger","PolarisDynamicExploreActions","PolarisDynamicExploreMediaHelpers","PolarisDynamicExplorePageSharedGrid.react","PolarisExploreLogger","PolarisExploreV2ExploreGridFragment","PolarisExploreV2ExploreGridRootQuery","PolarisLinkBuilder","PolarisOrganicThumbnailImpression","PolarisPostModalContext","PolarisReactRedux.react","PolarisRoutes","PolarisUA","emptyFunction","polarisDeepClone","polarisNormalizeSectionalItems","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;b.useMemo;var j=b.useState,k=c("requireDeferred")("PolarisLogger").__setRef("PolarisDynamicExploreV3MediaPageGrid.react"),l=4;function m(a){return d("PolarisUA").isMobile()?d("PolarisLinkBuilder").buildChainingMediaLink(d("PolarisDynamicExploreMediaHelpers").getPostCode(a)):d("PolarisLinkBuilder").buildMediaLink(d("PolarisDynamicExploreMediaHelpers").getPostCode(a))}function a(a){var b=d("react-compiler-runtime").c(20),e=a.exploreGridType,f=a.exploreQuery,g=a.pageID;a=d("CometRouteParams").useRouteParams();a=a.variant!=null?a.variant==="for_you":f.variables.is_nonpersonalized_explore===!1;var h=j(a),q=h[0],r=h[1];h=d("PolarisReactRedux.react").useSelector(u);f=d("CometRelay").usePreloadedQuery(c("PolarisExploreV2ExploreGridRootQuery"),f);f=d("CometRelay").usePaginationFragment(c("PolarisExploreV2ExploreGridFragment"),f);var v=f.data,w=f.loadNext;if(b[0]!==v.xdt_api__v1__explore__grid_connection.edges){f=v.xdt_api__v1__explore__grid_connection.edges.map(t);f=c("polarisNormalizeSectionalItems")(f);b[0]=v.xdt_api__v1__explore__grid_connection.edges;b[1]=f}else f=b[1];v=f;d("PolarisDynamicExploreActions").setupDynamicExploreGrid({isNonPersonalizedExplore:h});f=d("PolarisReactRedux.react").useSelector(s);var x=p,y;b[2]!==w?(y=function(){w(l,{onComplete:x}),k.onReady(o)},b[2]=w,b[3]=y):y=b[3];y=y;var z=n,A;b[4]!==g?(A=function(a,b){return d("PolarisOrganicThumbnailImpression").makeThumbnailImpressionAction({analyticsContext:g,column:a.column,gridItemSize:b,itemType:a.item_type,mediaType:(b=a.media_type)!=null?b:void 0,postId:d("PolarisDynamicExploreMediaHelpers").getPostId(a),row:a.row})},b[4]=g,b[5]=A):A=b[5];A=A;var B;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(B=function(a){r(a)},b[6]=B):B=b[6];B=B;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(B={handleCloseModal:c("emptyFunction"),handleHeroTabChange:B,handleOpenModal:c("emptyFunction")},b[7]=B):B=b[7];B=B;B=B;b[8]!==e||b[9]!==q||b[10]!==a||b[11]!==h||b[12]!==A||b[13]!==y||b[14]!==g||b[15]!==f||b[16]!==v?(z=q===a&&i.jsx(c("PolarisDynamicExplorePageSharedGrid.react"),{exploreGridType:e,logGridItemClick:z,logGridItemImpression:A,mediaLinkBuilder:m,modalEntryPath:d("PolarisRoutes").DISCOVER_MEDIA_PATH,onNextPage:y,pageID:g,pagination:h?f.nonpersonalized:f.personalized,requestInitialGrid:c("emptyFunction"),sectionalItems:v}),b[8]=e,b[9]=q,b[10]=a,b[11]=h,b[12]=A,b[13]=y,b[14]=g,b[15]=f,b[16]=v,b[17]=z):z=b[17];b[18]!==z?(e=i.jsx(c("PolarisPostModalContext").Provider,{value:B,children:z}),b[18]=z,b[19]=e):e=b[19];return e}function n(a,b,c,e,f){d("PolarisExploreLogger").logExploreHomeClick({column:f,gridItemSize:b,mediaType:d("PolarisDynamicExploreMediaHelpers").getMediaType(a),postId:d("PolarisDynamicExploreMediaHelpers").getPostId(a),row:e,type:d("PolarisExploreLogger").getDynamicExploreGridItemType(a)})}function o(a){a=a.logAction;a("discoverNextLoadAttempt")}function p(a){a==null?k.onReady(r):(k.onReady(q),c("FBLogger")("ig_web","ig_web_logged_in_explore_supernova").catching(a).mustfix("PolarisDynamicExploreV3MediaPageGrid.react.js: failed to load next page of explore grid"))}function q(a){a=a.logAction;a("discoverPostsLoadFailed")}function r(a){a=a.logAction;a("discoverPostsLoaded")}function s(a){return a.dynamicExplore.pagination}function t(a){return c("polarisDeepClone")(a.node)}function u(a){return a.dynamicExplore.isNonPersonalizedExplore}g["default"]=a}),98);
__d("PolarisDynamicExploreV3MediaPageGridWithRetry.react",["CometPlaceholder.react","CometRelay","PolarisDynamicExploreActions","PolarisDynamicExploreLoadingSpinner.react","PolarisDynamicExploreTypes","PolarisDynamicExploreV3MediaPageGrid.react","PolarisErrorBoundaryWithRetry.react","PolarisErrorRetrySection.react","PolarisExploreV2ExploreGridRootQuery","PolarisReactRedux.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useState;function a(a){var b=d("react-compiler-runtime").c(16),e=a.exploreQuery;a=a.pageID;var f=d("PolarisReactRedux.react").useDispatch(),g=d("CometRelay").useRelayEnvironment(),h=j(!1),k=h[0],l=h[1];b[0]!==g?(h=function(a){return function(){l(!0),d("CometRelay").fetchQuery(g,c("PolarisExploreV2ExploreGridRootQuery"),{}).toPromise()["finally"](function(){l(!1),a()})}},b[0]=g,b[1]=h):h=b[1];var m=h;b[2]!==m||b[3]!==f?(h=function(a,b){f(d("PolarisDynamicExploreActions").logErrorAndShowRetryToast(a,m(b)))},b[2]=m,b[3]=f,b[4]=h):h=b[4];h=h;var n;b[5]!==m?(n=function(a,b){a=m(b);return i.jsx(c("PolarisErrorRetrySection.react"),{onRetry:a})},b[5]=m,b[6]=n):n=b[6];n=n;var o;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(o=i.jsx(c("PolarisDynamicExploreLoadingSpinner.react"),{}),b[7]=o):o=b[7];var p;b[8]!==k||b[9]!==e||b[10]!==a?(p=!k&&i.jsx(c("PolarisDynamicExploreV3MediaPageGrid.react"),{exploreGridType:d("PolarisDynamicExploreTypes").DYNAMIC_EXPLORE_GRID_TYPES.home_explore_grid,exploreQuery:e,pageID:a}),b[8]=k,b[9]=e,b[10]=a,b[11]=p):p=b[11];b[12]!==h||b[13]!==n||b[14]!==p?(k=i.jsx(c("CometPlaceholder.react"),{fallback:o,children:i.jsx(c("PolarisErrorBoundaryWithRetry.react"),{fallback:n,onError:h,children:p})}),b[12]=h,b[13]=n,b[14]=p,b[15]=k):k=b[15];return k}g["default"]=a}),98);
__d("PolarisExploreV3RootContent.react",["CometPlaceholder.react","FBLogger","PolarisDynamicExploreLoadingSpinner.react","PolarisDynamicExplorePageContentWrapper.react","PolarisDynamicExploreV3MediaPageGridWithRetry.react","PolarisQPManager.react","PolarisReactRedux.react","PolarisRoutes","PolarisSearchResultsListContainer.react","PolarisUA","cr:6792","polarisSearchSelectors","react","useCometRouterDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect,k="exploreLandingPage";function a(a){var e=a.rootQuery;a=a.routeProps;var f=c("useCometRouterDispatcher")(),g=a.is_search_open;a=a.nonpersonalized;var h=d("PolarisReactRedux.react").useDispatch();h({isNonPersonalizedExplore:a,type:"NON_PERSONALIZED_EXPLORE"});h=d("PolarisReactRedux.react").useSelector(d("polarisSearchSelectors").selectPendingQuery);j(function(){if(d("PolarisUA").isMobile())try{f==null?void 0:f.prefetchRouteDefinition(d("PolarisRoutes").DISCOVER_SEARCH_PATH)}catch(a){c("FBLogger")("ig_web").catching(a)}},[f]);a=g===!0&&d("PolarisUA").isMobile();return i.jsxs(c("PolarisDynamicExplorePageContentWrapper.react"),{pageId:k,children:[i.jsx(c("PolarisQPManager.react"),{slot:"explore"}),a?i.jsxs(i.Fragment,{children:[h.length>0&&b("cr:6792")!=null&&i.jsx(b("cr:6792"),{pendingQuery:h}),i.jsx(c("PolarisSearchResultsListContainer.react"),{analyticsContext:k,isVisibleInPopup:!1})]}):i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("PolarisDynamicExploreLoadingSpinner.react"),{}),children:i.jsx(c("PolarisDynamicExploreV3MediaPageGridWithRetry.react"),{exploreQuery:e,pageID:k})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisExploreV3Root.react",["PolarisExploreMobileHeader.react","PolarisExploreV3RootContent.react","PolarisMobileHeaderWrapper.react","react","react-compiler-runtime","usePolarisPageID","withPolarisShell.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.props;a=a.queries;e=e.routeProps;a=a.polarisExploreGridRootQuery;var f=e.is_search_open,g=c("usePolarisPageID")();f=f===!0;var h;b[0]!==g||b[1]!==f?(h=i.jsx(c("PolarisMobileHeaderWrapper.react"),{children:i.jsx(c("PolarisExploreMobileHeader.react"),{analyticsContext:g,isSearchOpen:f})}),b[0]=g,b[1]=f,b[2]=h):h=b[2];b[3]!==a||b[4]!==e?(g=i.jsx(c("PolarisExploreV3RootContent.react"),{rootQuery:a,routeProps:e}),b[3]=a,b[4]=e,b[5]=g):g=b[5];b[6]!==h||b[7]!==g?(f=i.jsxs(i.Fragment,{children:[h,g]}),b[6]=h,b[7]=g,b[8]=f):f=b[8];return f}b=c("withPolarisShell.react")(a);g["default"]=b}),98);